#####################################
#####################################
##
## Example CosmoGridV11 pipeline
##
#####################################
#####################################

# test 

- name: //test_v11_haloprof
  cmd: esub cosmogridv1.apps.run_haloops profile_halos     --config=config_v11.yaml   --dir_out=v11 --tasks="0" --verbosity=debug 

- name: //test_v11_paramtable # create baryon parameter table in the new format
  cmd: esub cosmogridv1.apps.run_paramtables baryon_params --config=config_v11.yaml   --dir_out=v11 --verbosity=debug 

- name: //test_v11_baryonify # baryonify - here only the benchmarks in indices 3400-3407
  cmd: esub cosmogridv1.apps.run_haloops baryonify_shells  --config=config_v11.yaml   --dir_out=v11 --tasks="3400>3407" --n_cores=7 --mode=jobarray --verbosity=info

# full run fiducial

- name: v11_fid_haloprof # fiducial cosmology + deltas halo profiling
  cmd: esub cosmogridv1.apps.run_haloops profile_halos --config=config_v11.yaml --dir_out=v11 --tasks="0>3400" --n_cores=3400 --mode=jobarray --verbosity=info 

- name: v11_fid_baryonify # fiducial cosmology + deltas shell baryonification
  cmd: esub cosmogridv1.apps.run_haloops baryonify_shells --config=config_v11.yaml   --dir_out=v11 --tasks="0>3400" --n_cores=3400 --mode=jobarray --verbosity=info 

# run the grid

- name: v11_grid_haloprof # grid cosmologies + deltas halo profiling
  cmd: esub cosmogridv1.apps.run_haloops profile_halos --config=config_v11.yaml --dir_out=v11 --tasks="3400>20900" --n_cores=17000 --mode=jobarray --verbosity=info 

- name: v11_grid_baryonify # halo profile full grid
  cmd: esub cosmogridv1.apps.run_haloops baryonify_shells --config=config_v11.yaml   --dir_out=v11 --tasks="3400>20900" --n_cores=17000 --mode=jobarray --verbosity=info

